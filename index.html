<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud File Upload</title>

    <style>
        body {
            background:#eef3f8;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            padding: 40px 10px;
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 6px 18px rgba(0,0,0,0.1);
        }

        .drop-box {
            border: 3px dashed #3b82f6;
            padding: 40px 20px;
            border-radius: 12px;
            cursor: pointer;
            margin: 20px 0;
        }

        .drop-box:hover {
            background:#f0f6ff;
        }

        .btn {
            background:#3b82f6;
            color:white;
            padding: 15px 20px;
            border:none;
            border-radius:8px;
            width:100%;
            cursor:pointer;
            font-size: 18px;
            margin-top: 20px;
        }

        .btn:disabled {
            background:#a7c4ff;
            cursor:not-allowed;
        }

        #resultBox {
            background:#eef3ff;
            padding:20px;
            margin-top:20px;
            border-radius:10px;
            border-left:4px solid #3b82f6;
            display:none;
            text-align:left;
            word-break: break-all;
        }
    </style>
</head>

<body>

<div class="container">

    <h2>☁️ Cloud File Upload</h2>

    <!-- CLICK BOX -->
    <div class="drop-box" id="dropBox">
        <p id="fileLabel"><strong>Click to choose a file</strong><br>Any file up to 5MB</p>
    </div>

    <!-- HIDDEN FILE INPUT -->
    <input type="file" id="fileInput" style="display:none;">

    <!-- Upload Button -->
    <button id="uploadBtn" class="btn">Upload to Cloud</button>

    <!-- Output -->
    <div id="resultBox">
        <h3>Uploaded File URL:</h3>
        <p id="fileUrl"></p>
    </div>

</div>

<script>
const dropBox = document.getElementById("dropBox");
const fileInput = document.getElementById("fileInput");
const uploadBtn = document.getElementById("uploadBtn");
const fileLabel = document.getElementById("fileLabel");
const resultBox = document.getElementById("resultBox");
const fileUrl = document.getElementById("fileUrl");

let selectedFile = null;

// Open file chooser when clicking the box
dropBox.addEventListener("click", () => fileInput.click());

// Save selected file
fileInput.addEventListener("change", () => {
    selectedFile = fileInput.files[0];
    if (selectedFile) {
        fileLabel.innerHTML = `<strong>Selected:</strong> ${selectedFile.name}`;
    }
});

// Upload file
uploadBtn.addEventListener("click", async () => {

    if (!selectedFile) {
        alert("Please choose a file first.");
        return;
    }

    uploadBtn.textContent = "Uploading...";
    uploadBtn.disabled = true;

    const formData = new FormData();
    formData.append("file", selectedFile);

    try {
        const res = await fetch("https://s3-cloud-api.onrender.com/upload", {
            method: "POST",
            body: formData,
        });

        const data = await res.json();

        if (data.success) {
            resultBox.style.display = "block";
            fileUrl.textContent = data.url;
        } else {
            alert("Upload failed: " + data.error);
        }

    } catch (err) {
        alert("Network error: " + err.message);
    }

    uploadBtn.textContent = "Upload to Cloud";
    uploadBtn.disabled = false;
});
</script>

</body>
</html>
